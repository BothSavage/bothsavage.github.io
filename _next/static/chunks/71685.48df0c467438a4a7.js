"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71685],{71685:function(t,e,o){o.r(e);var l=o(74925),n=o(39323),c=o(94246),u=o(11163),s=o(67294);let r=t=>{let e=[],{theme:o}=(0,n.O)(),r=(0,u.useRouter)();(0,s.useEffect)(()=>{var e;(null==t?void 0:t.posts)&&(null==t?void 0:null===(e=t.posts)||void 0===e?void 0:e.length)>0&&d(t.posts)},[r.events]),(0,s.useEffect)(()=>{f()},[o]);let i=(0,l.J)("COMMENT_TWIKOO_CDN_URL"),a=(0,l.J)("COMMENT_TWIKOO_ENV_ID"),d=async t=>{t.forEach(t=>{t.slug=t.slug.startsWith("/")?t.slug:"/".concat(t.slug)});try{await (0,c.TY)(i,"js");let o=window.twikoo;o.getCommentsCount({envId:a,urls:null==t?void 0:t.map(t=>t.slug),includeReply:!0}).then(function(t){e=t,f()}).catch(function(t){console.error(t)})}catch(t){console.error("twikoo 加载失败",t)}},f=()=>{0!==e.length&&t.posts.forEach(t=>{let o=e.find(e=>e.url===t.slug);if(o){let e=document.querySelectorAll(".comment-count-text-".concat(t.id));e.forEach(t=>{t.innerHTML=o.count});let l=document.querySelectorAll(".comment-count-wrapper-".concat(t.id));l.forEach(t=>{t.classList.remove("hidden")})}})};return null};e.default=r}}]);